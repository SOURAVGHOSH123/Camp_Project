<% layout('layouts/boilerplate') %>
   <div id="cluster-map" class="mb-2"></div>

   <h1>All CampGround Details</h1>

   <div class="mb-3"><a class="text-decoration-none text-danger" href="/campgrounds/new">Create a new</a></div>
   <% for(let campground of campgrounds){ %>
      <div class="card mb-3">
         <div class="row">
            <div class="col-md-4">
               <% if (campground.images.length>0) { %>
                  <img crossorigin="anonymous" class="img-fluid" alt="" src="<%= campground.images[0].url %>">
                  <% } else { %>
                     <img class="img-fluid"
                        src="https://res.cloudinary.com/df08ufqmp/image/upload/v1737661177/YalmCamp/sccuatzwlimvzgsxuako.jpg"
                        alt="image">
                     <% } %>
            </div>
            <div class="col-md-8">
               <div class="card-body">
                  <h5 class="card-title">
                     <%= campground.title %>
                  </h5>
                  <p class="card-text">
                     <%= campground.description %>
                  </p>
                  <p class="card-text">
                     <small class="text-muted">
                        <%= campground.location %>
                     </small>
                  </p><br><br>
                  <a class="btn btn-primary" href="campgrounds/<%= campground._id %>">
                     <%= campground.title %>
                  </a>
               </div>
            </div>
         </div>
      </div>
      <% } %>

         <script>
            const maptilerApiKey = '<%- process.env.MAPTILER_API_KEY %>';
            const campgrounds = { features:<%- JSON.stringify(campgrounds) %>}
         </script>
         <script src="/javascripts/clusterMap.js"></script>